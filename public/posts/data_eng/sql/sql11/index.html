<!DOCTYPE html>
<html lang="en" dir="auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>SQL 11. Views &amp; Data Manipulation | Minjun Jeon</title>
<meta name="keywords" content="sql, data manipulation, update, delete, views, materialized views, interview prep">
<meta name="description" content="If you&rsquo;re prepping for a SQL or data engineering interview, it’s essential to be fluent not only in writing queries but also in understanding the impact of commands like UPDATE, DELETE, and views (both virtual and materialized). This post covers practical examples and deepens your understanding of data manipulation and view management in PostgreSQL.

1. UPDATE: Modifying Existing Rows
To modify data in a table, use the UPDATE statement. Here&rsquo;s the general syntax:">
<meta name="author" content="map[name:Minjun Jeon]">
<link rel="canonical" href="https://www.minjunjeon.com/posts/data_eng/sql/sql11/">
<link crossorigin="anonymous" href="/assets/css/stylesheet.e074db631f584fe5975f0d0631f38a7639c9a38457467d1f3c1dcaec9fe4f040.css" integrity="sha256-4HTbYx9YT&#43;WXXw0GMfOKdjnJo4RXRn0fPB3K7J/k8EA=" rel="preload stylesheet" as="style">
<link rel="icon" href="/favicon.ico" type="image/x-icon">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.minjunjeon.com/assets/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.minjunjeon.com/assets/favicon-32x32.png">
<link rel="apple-touch-icon" href="https://www.minjunjeon.com/assets/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.minjunjeon.com/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<link rel="alternate" hreflang="en" href="https://www.minjunjeon.com/posts/data_eng/sql/sql11/">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebSite",
  "url": "https:\/\/www.minjunjeon.com\/",
  "name": "Minjun Jeon",
  "publisher": {
    "@type": "Organization",
    "name": "Minjun Jeon",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.minjunjeon.com\/assets\/android-chrome-512x512.png"
    }
  },
  "image": "https:\/\/www.minjunjeon.com\/assets\/android-chrome-512x512.png"
}
</script>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "Minjun Jeon",
  "url": "https:\/\/www.minjunjeon.com\/",
  "image": "https:\/\/www.minjunjeon.com\/assets\/android-chrome-512x512.png",
  "sameAs": [
    "",
    ""
  ]
}
</script>



<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https:\/\/www.minjunjeon.com\/posts\/data_eng\/sql\/sql11\/"
  },
  "headline": "SQL 11. Views \u0026 Data Manipulation",
  "description": "\u003cp\u003eIf you\u0026rsquo;re prepping for a SQL or data engineering interview, it’s essential to be fluent not only in writing queries but also in understanding the impact of commands like \u003ccode\u003eUPDATE\u003c\/code\u003e, \u003ccode\u003eDELETE\u003c\/code\u003e, and views (both virtual and materialized). This post covers practical examples and deepens your understanding of data manipulation and view management in PostgreSQL.\u003c\/p\u003e\n\u003chr\u003e\n\u003ch2 id=\u00221-update-modifying-existing-rows\u0022\u003e1. \u003ccode\u003eUPDATE\u003c\/code\u003e: Modifying Existing Rows\u003c\/h2\u003e\n\u003cp\u003eTo modify data in a table, use the \u003ccode\u003eUPDATE\u003c\/code\u003e statement. Here\u0026rsquo;s the general syntax:\u003c\/p\u003e",
  "image": "https:\/\/www.minjunjeon.com\/assets\/android-chrome-512x512.png",
  "author": {
    "@type": "Person",
    "name": "Minjun Jeon"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Minjun Jeon",
    "logo": {
      "@type": "ImageObject",
      "url": "https:\/\/www.minjunjeon.com\/assets\/android-chrome-512x512.png"
    }
  },
  "datePublished": "2025-06-08T00:00:00Z",
  "dateModified": "2025-06-08T00:00:00Z"
}
</script>

<meta property="og:url" content="https://www.minjunjeon.com/posts/data_eng/sql/sql11/">
  <meta property="og:site_name" content="Minjun Jeon">
  <meta property="og:title" content="SQL 11. Views & Data Manipulation">
  <meta property="og:description" content="If you’re prepping for a SQL or data engineering interview, it’s essential to be fluent not only in writing queries but also in understanding the impact of commands like UPDATE, DELETE, and views (both virtual and materialized). This post covers practical examples and deepens your understanding of data manipulation and view management in PostgreSQL.
1. UPDATE: Modifying Existing Rows To modify data in a table, use the UPDATE statement. Here’s the general syntax:">
  <meta property="og:locale" content="en-us">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2025-06-08T00:00:00+00:00">
    <meta property="article:modified_time" content="2025-06-08T00:00:00+00:00">
    <meta property="article:tag" content="Sql">
    <meta property="article:tag" content="Data Manipulation">
    <meta property="article:tag" content="Update">
    <meta property="article:tag" content="Delete">
    <meta property="article:tag" content="Views">
    <meta property="article:tag" content="Materialized Views">
      <meta property="og:image" content="https://www.minjunjeon.com/assets/android-chrome-512x512.png">
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:image" content="https://www.minjunjeon.com/assets/android-chrome-512x512.png">
<meta name="twitter:title" content="SQL 11. Views &amp; Data Manipulation">
<meta name="twitter:description" content="If you&rsquo;re prepping for a SQL or data engineering interview, it’s essential to be fluent not only in writing queries but also in understanding the impact of commands like UPDATE, DELETE, and views (both virtual and materialized). This post covers practical examples and deepens your understanding of data manipulation and view management in PostgreSQL.

1. UPDATE: Modifying Existing Rows
To modify data in a table, use the UPDATE statement. Here&rsquo;s the general syntax:">

</head>

<body class=" dark" id="top">
<script>
    if (localStorage.getItem("pref-theme") === "light") {
        document.body.classList.remove('dark')
    }

</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.minjunjeon.com/" accesskey="h" title="Minjun Jeon (Alt + H)">Minjun Jeon</a>
            <div class="logo-switches">
                <button id="theme-toggle" accesskey="t" title="(Alt + T)" aria-label="Toggle theme">
                    <svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
                    </svg>
                    <svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24"
                        fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round"
                        stroke-linejoin="round">
                        <circle cx="12" cy="12" r="5"></circle>
                        <line x1="12" y1="1" x2="12" y2="3"></line>
                        <line x1="12" y1="21" x2="12" y2="23"></line>
                        <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                        <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                        <line x1="1" y1="12" x2="3" y2="12"></line>
                        <line x1="21" y1="12" x2="23" y2="12"></line>
                        <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                        <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
                    </svg>
                </button>
            </div>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.minjunjeon.com/" title="Home">
                    <span>Home</span>
                </a>
            </li>
            <li>
                <a href="https://www.minjunjeon.com/about_me/" title="About">
                    <span>About</span>
                </a>
            </li>
            <li>
                <a href="https://www.minjunjeon.com/posts/" title="Archive">
                    <span>Blog</span>
                </a>
            </li>
            <li>
                <a href="https://www.minjunjeon.com/projects/" title="Projects">
                    <span>Projects</span>
                </a>
            </li>
            <li>
                <a href="https://www.minjunjeon.com/contact/" title="Contact">
                    <span>Contact</span>
                </a>
            </li>
            <li>
                <a href="https://www.minjunjeon.com/resume/" title="Resume">
                    <span>Resume</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    
    <h1 class="post-title entry-hint-parent">
      SQL 11. Views &amp; Data Manipulation
    </h1>
    <div class="post-meta"><span title='2025-06-08 00:00:00 +0000 UTC'>June 8, 2025</span>&nbsp;·&nbsp;map[name:Minjun Jeon]

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#1-update-modifying-existing-rows" aria-label="1. UPDATE: Modifying Existing Rows">1. UPDATE: Modifying Existing Rows</a><ul>
                        
                <li>
                    <a href="#example-update-a-specific-row" aria-label="Example: Update a specific row">Example: Update a specific row</a></li>
                <li>
                    <a href="#example-dynamic-update" aria-label="Example: Dynamic update">Example: Dynamic update</a></li>
                <li>
                    <a href="#example-batch-transformation" aria-label="Example: Batch transformation">Example: Batch transformation</a></li></ul>
                </li>
                <li>
                    <a href="#2-delete-removing-rows" aria-label="2. DELETE: Removing Rows">2. DELETE: Removing Rows</a><ul>
                        
                <li>
                    <a href="#examples" aria-label="Examples">Examples</a></li></ul>
                </li>
                <li>
                    <a href="#3-create-table--as-creating-derived-tables" aria-label="3. CREATE TABLE ... AS: Creating Derived Tables">3. CREATE TABLE ... AS: Creating Derived Tables</a><ul>
                        
                <li>
                    <a href="#examples-1" aria-label="Examples">Examples</a></li></ul>
                </li>
                <li>
                    <a href="#4-create-view-logical-abstractions-over-data" aria-label="4. CREATE VIEW: Logical Abstractions Over Data">4. CREATE VIEW: Logical Abstractions Over Data</a><ul>
                        
                <li>
                    <a href="#example" aria-label="Example">Example</a></li>
                <li>
                    <a href="#benefits-of-views" aria-label="Benefits of Views">Benefits of Views</a></li>
                <li>
                    <a href="#limitations" aria-label="Limitations">Limitations</a></li>
                <li>
                    <a href="#41-what-is-an-updatable-view" aria-label="4.1 What is an Updatable View?">4.1 What is an Updatable View?</a><ul>
                        
                <li>
                    <a href="#updatable-view-example" aria-label="Updatable View Example">Updatable View Example</a></li>
                <li>
                    <a href="#not-updatable-view-example" aria-label="Not Updatable View Example">Not Updatable View Example</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#5-create-materialized-view-cached-results" aria-label="5. CREATE MATERIALIZED VIEW: Cached Results">5. CREATE MATERIALIZED VIEW: Cached Results</a><ul>
                        
                <li>
                    <a href="#benefits" aria-label="Benefits">Benefits</a></li>
                <li>
                    <a href="#limitation" aria-label="Limitation">Limitation</a></li></ul>
                </li>
                <li>
                    <a href="#6-managing-views" aria-label="6. Managing Views">6. Managing Views</a><ul>
                        
                <li>
                    <a href="#for-views" aria-label="For Views">For Views</a></li>
                <li>
                    <a href="#for-materialized-views" aria-label="For Materialized Views">For Materialized Views</a></li></ul>
                </li>
                <li>
                    <a href="#bonus-common-interview-scenarios" aria-label="Bonus: Common Interview Scenarios">Bonus: Common Interview Scenarios</a><ul>
                        
                <li>
                    <a href="#what-is-an-index-and-why-cant-a-view-be-indexed" aria-label="What is an Index, and Why Can&rsquo;t a View Be Indexed?">What is an Index, and Why Can&rsquo;t a View Be Indexed?</a><ul>
                        
                <li>
                    <a href="#what-is-an-index" aria-label="What Is an Index?">What Is an Index?</a></li>
                <li>
                    <a href="#why-cant-you-index-a-view" aria-label="Why Can’t You Index a View?">Why Can’t You Index a View?</a></li>
                <li>
                    <a href="#but-materialized-views-can-be-indexed" aria-label="But Materialized Views Can Be Indexed">But Materialized Views Can Be Indexed</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#summary-table" aria-label="Summary Table">Summary Table</a>
                </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><p>If you&rsquo;re prepping for a SQL or data engineering interview, it’s essential to be fluent not only in writing queries but also in understanding the impact of commands like <code>UPDATE</code>, <code>DELETE</code>, and views (both virtual and materialized). This post covers practical examples and deepens your understanding of data manipulation and view management in PostgreSQL.</p>
<hr>
<h2 id="1-update-modifying-existing-rows">1. <code>UPDATE</code>: Modifying Existing Rows<a hidden class="anchor" aria-hidden="true" href="#1-update-modifying-existing-rows">#</a></h2>
<p>To modify data in a table, use the <code>UPDATE</code> statement. Here&rsquo;s the general syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> <span style="color:#f92672">&lt;</span>table_name<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> <span style="color:#f92672">&lt;</span>column_name<span style="color:#f92672">&gt;</span> <span style="color:#f92672">=</span> <span style="color:#f92672">&lt;</span><span style="color:#66d9ef">value</span><span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">&lt;</span>condition<span style="color:#f92672">&gt;</span>;
</span></span></code></pre></div><h3 id="example-update-a-specific-row">Example: Update a specific row<a hidden class="anchor" aria-hidden="true" href="#example-update-a-specific-row">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> songs
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> genre <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;Pop music&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> song_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><h3 id="example-dynamic-update">Example: Dynamic update<a hidden class="anchor" aria-hidden="true" href="#example-dynamic-update">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> songs
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> price <span style="color:#f92672">=</span> song_id <span style="color:#f92672">+</span> <span style="color:#ae81ff">0.99</span>;
</span></span></code></pre></div><h3 id="example-batch-transformation">Example: Batch transformation<a hidden class="anchor" aria-hidden="true" href="#example-batch-transformation">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> customer
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> email <span style="color:#f92672">=</span> LOWER(email);
</span></span></code></pre></div><blockquote>
<p><strong>Interview Tip:</strong> Always include a <code>WHERE</code> clause unless you intend to update all rows.</p></blockquote>
<hr>
<h2 id="2-delete-removing-rows">2. <code>DELETE</code>: Removing Rows<a hidden class="anchor" aria-hidden="true" href="#2-delete-removing-rows">#</a></h2>
<p>Deletes rows from a table. The syntax:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> <span style="color:#f92672">&lt;</span>table_name<span style="color:#f92672">&gt;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> <span style="color:#f92672">&lt;</span>condition<span style="color:#f92672">&gt;</span>;
</span></span></code></pre></div><h3 id="examples">Examples<a hidden class="anchor" aria-hidden="true" href="#examples">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> songs
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> song_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">4</span>;
</span></span></code></pre></div><div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> songs
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> song_id <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>);
</span></span></code></pre></div><p>To delete <strong>all rows</strong>:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> songs;
</span></span></code></pre></div><p>To return deleted rows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DELETE</span> <span style="color:#66d9ef">FROM</span> songs
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> song_id <span style="color:#66d9ef">IN</span> (<span style="color:#ae81ff">3</span>, <span style="color:#ae81ff">4</span>)
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">RETURNING</span> <span style="color:#f92672">*</span>;
</span></span></code></pre></div><blockquote>
<p><strong>Interview Tip:</strong> Know the difference between <code>DELETE</code> (can return rows, slower) and <code>TRUNCATE</code> (faster, cannot filter or return rows, and usually not transactional).</p></blockquote>
<hr>
<h2 id="3-create-table--as-creating-derived-tables">3. <code>CREATE TABLE ... AS</code>: Creating Derived Tables<a hidden class="anchor" aria-hidden="true" href="#3-create-table--as-creating-derived-tables">#</a></h2>
<p>Use this to create a new table from a query:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> <span style="color:#f92672">&lt;</span>table_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">...</span>
</span></span></code></pre></div><h3 id="examples-1">Examples<a hidden class="anchor" aria-hidden="true" href="#examples-1">#</a></h3>
<p>You can copy an existing table as follows:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> customer_test <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> customer;
</span></span></code></pre></div><p>You can use more complext queries to create derived tables.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">TABLE</span> customer_anonymous <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> customer_id, initials
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> customer
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> first_name <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;C%&#39;</span>;
</span></span></code></pre></div><blockquote>
<p><strong>Interview Tip:</strong> This is a <em>snapshot</em>. Future changes to the source table do not affect the new table.</p></blockquote>
<hr>
<h2 id="4-create-view-logical-abstractions-over-data">4. <code>CREATE VIEW</code>: Logical Abstractions Over Data<a hidden class="anchor" aria-hidden="true" href="#4-create-view-logical-abstractions-over-data">#</a></h2>
<p>A <strong>view</strong> is a stored SQL query. It behaves like a table but doesn’t store data physically.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">...</span>
</span></span></code></pre></div><h3 id="example">Example<a hidden class="anchor" aria-hidden="true" href="#example">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> customer_anonymous <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> customer_id, initials
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> customer
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> first_name <span style="color:#66d9ef">LIKE</span> <span style="color:#e6db74">&#39;C%&#39;</span>;
</span></span></code></pre></div><p>You can now query it like a table:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#f92672">*</span> <span style="color:#66d9ef">FROM</span> customer_anonymous;
</span></span></code></pre></div><h3 id="benefits-of-views">Benefits of Views<a hidden class="anchor" aria-hidden="true" href="#benefits-of-views">#</a></h3>
<ul>
<li>No redundant storage</li>
<li>Always reflects latest data</li>
<li>Great for reusability and abstraction</li>
</ul>
<h3 id="limitations">Limitations<a hidden class="anchor" aria-hidden="true" href="#limitations">#</a></h3>
<ul>
<li>Performance overhead for complex queries</li>
<li>Cannot always be updated directly (e.g. joins, aggregates)</li>
</ul>
<h3 id="41-what-is-an-updatable-view">4.1 What is an Updatable View?<a hidden class="anchor" aria-hidden="true" href="#41-what-is-an-updatable-view">#</a></h3>
<p>You&rsquo;re right about one thing: <strong>when data in the underlying tables change, views reflect those changes</strong> automatically. That&rsquo;s because views <strong>don’t store data</strong>—they&rsquo;re just saved SQL queries.</p>
<p>But when we say a <strong>view is (or isn&rsquo;t) updatable</strong>, we’re talking about whether you can <strong>run <code>INSERT</code>, <code>UPDATE</code>, or <code>DELETE</code></strong> statements <strong>on the view itself</strong>, not just query it.</p>
<h4 id="updatable-view-example">Updatable View Example<a hidden class="anchor" aria-hidden="true" href="#updatable-view-example">#</a></h4>
<p>Let’s say you create a very simple view:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> simple_customer <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> customer_id, email
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> customer;
</span></span></code></pre></div><p>You can update it like this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">UPDATE</span> simple_customer
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SET</span> email <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;new@example.com&#39;</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">WHERE</span> customer_id <span style="color:#f92672">=</span> <span style="color:#ae81ff">5</span>;
</span></span></code></pre></div><p>PostgreSQL allows this because:</p>
<ul>
<li>It&rsquo;s based on <strong>a single table</strong></li>
<li>There are <strong>no joins</strong>, <strong>aggregates</strong>, or <strong>GROUP BY</strong></li>
<li>All selected columns map clearly to base table columns</li>
</ul>
<h4 id="not-updatable-view-example">Not Updatable View Example<a hidden class="anchor" aria-hidden="true" href="#not-updatable-view-example">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-sql" data-lang="sql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">VIEW</span> customer_order_summary <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#66d9ef">c</span>.customer_id, <span style="color:#66d9ef">c</span>.name, <span style="color:#66d9ef">COUNT</span>(o.order_id) <span style="color:#66d9ef">AS</span> total_orders
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> customer <span style="color:#66d9ef">c</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">JOIN</span> orders o <span style="color:#66d9ef">ON</span> <span style="color:#66d9ef">c</span>.customer_id <span style="color:#f92672">=</span> o.customer_id
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> <span style="color:#66d9ef">c</span>.customer_id, <span style="color:#66d9ef">c</span>.name;
</span></span></code></pre></div><p>This <strong>cannot</strong> be updated directly because:</p>
<ul>
<li>It includes a <strong>join</strong></li>
<li>It uses <strong>aggregate function (<code>COUNT</code>)</strong></li>
<li>There&rsquo;s no clear 1-to-1 mapping between the view’s rows and the base table’s rows</li>
</ul>
<blockquote>
<p><strong>Rule of Thumb:</strong> If PostgreSQL can’t unambiguously map each row in the view to a single row in a base table, it’s not updatable.</p></blockquote>
<hr>
<blockquote>
<p><strong>Interview Tip:</strong> Understand <em>updatable views</em>. A simple view over a single table without aggregates or joins can typically be updated.</p></blockquote>
<hr>
<h2 id="5-create-materialized-view-cached-results">5. <code>CREATE MATERIALIZED VIEW</code>: Cached Results<a hidden class="anchor" aria-hidden="true" href="#5-create-materialized-view-cached-results">#</a></h2>
<p>A <strong>materialized view</strong> stores the result of a query physically on disk.</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">MATERIALIZED</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">...</span>
</span></span></code></pre></div><h3 id="benefits">Benefits<a hidden class="anchor" aria-hidden="true" href="#benefits">#</a></h3>
<ul>
<li>Faster access for expensive queries</li>
<li>Good for read-heavy workloads</li>
</ul>
<h3 id="limitation">Limitation<a hidden class="anchor" aria-hidden="true" href="#limitation">#</a></h3>
<ul>
<li>Data is <strong>not automatically updated</strong></li>
</ul>
<p>To refresh the data:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">REFRESH</span> <span style="color:#66d9ef">MATERIALIZED</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span>;
</span></span></code></pre></div><blockquote>
<p><strong>Interview Tip:</strong> Know when to use a materialized view vs. a regular view. The key tradeoff is <strong>performance vs. freshness</strong>.</p></blockquote>
<hr>
<h2 id="6-managing-views">6. Managing Views<a hidden class="anchor" aria-hidden="true" href="#6-managing-views">#</a></h2>
<p>You can modify or delete views and materialized views with the following commands:</p>
<h3 id="for-views">For Views<a hidden class="anchor" aria-hidden="true" href="#for-views">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">RENAME</span> <span style="color:#66d9ef">TO</span> <span style="color:#f92672">&lt;</span>new_name<span style="color:#f92672">&gt;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">RENAME</span> <span style="color:#66d9ef">COLUMN</span> old <span style="color:#66d9ef">TO</span> new;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">OR</span> <span style="color:#66d9ef">REPLACE</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> <span style="color:#ae81ff">...</span>;
</span></span></code></pre></div><h3 id="for-materialized-views">For Materialized Views<a hidden class="anchor" aria-hidden="true" href="#for-materialized-views">#</a></h3>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">DROP</span> <span style="color:#66d9ef">MATERIALIZED</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span>;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">ALTER</span> <span style="color:#66d9ef">MATERIALIZED</span> <span style="color:#66d9ef">VIEW</span> <span style="color:#f92672">&lt;</span>view_name<span style="color:#f92672">&gt;</span> <span style="color:#66d9ef">RENAME</span> <span style="color:#66d9ef">TO</span> <span style="color:#f92672">&lt;</span>new_name<span style="color:#f92672">&gt;</span>;
</span></span></code></pre></div><blockquote>
<p><strong>Interview Tip:</strong> You <strong>cannot</strong> use <code>CREATE OR REPLACE</code> with materialized views. Instead, drop and recreate.</p></blockquote>
<hr>
<h2 id="bonus-common-interview-scenarios">Bonus: Common Interview Scenarios<a hidden class="anchor" aria-hidden="true" href="#bonus-common-interview-scenarios">#</a></h2>
<ul>
<li>
<p><strong>Can views be indexed?</strong>
No, but materialized views can be indexed.</p>
</li>
<li>
<p><strong>What happens when you update data used in a view?</strong>
The next time the view is queried, it reflects the change (unless it’s a materialized view).</p>
</li>
<li>
<p><strong>How to persist calculated fields efficiently?</strong>
Use a materialized view with indexed columns.</p>
</li>
<li>
<p><strong>Can I insert into a view?</strong>
Only if it’s updatable (i.e., directly maps to a single base table with no joins or aggregations).</p>
</li>
<li>
<p><strong>Is DML allowed in a materialized view?</strong>
No, a materialized view is a <strong>read-only cache</strong> of a SQL query&rsquo;s result, and it is not a real table.
In-depth answer: There are two reasons:</p>
<ul>
<li><strong>Lack of Source Table Mapping</strong>: materialized veiws don&rsquo;t track where each row came from in the base table. When DML commands are executed on materialized views, PostgreSQL will not have any idea on which table(s) the value should be written back to and how to propagate this change across joins, aggregations, or filters.</li>
<li><strong>Could be derived from complex queries</strong>: this is the same issue for the Not Updatable Views.
Due to these two reasons, you have to be okay with <strong>stale data</strong>.</li>
</ul>
</li>
</ul>
<h3 id="what-is-an-index-and-why-cant-a-view-be-indexed">What is an Index, and Why Can&rsquo;t a View Be Indexed?<a hidden class="anchor" aria-hidden="true" href="#what-is-an-index-and-why-cant-a-view-be-indexed">#</a></h3>
<h4 id="what-is-an-index">What Is an Index?<a hidden class="anchor" aria-hidden="true" href="#what-is-an-index">#</a></h4>
<p>An <strong>index</strong> is like a <strong>lookup table</strong> for your database. It makes it much faster to find rows, similar to an index in a book.</p>
<p>For example, if you create this:</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> idx_customer_email <span style="color:#66d9ef">ON</span> customer(email);
</span></span></code></pre></div><p>Now PostgreSQL can find rows in the <code>customer</code> table by <code>email</code> much faster—without scanning every row.</p>
<h4 id="why-cant-you-index-a-view">Why Can’t You Index a View?<a hidden class="anchor" aria-hidden="true" href="#why-cant-you-index-a-view">#</a></h4>
<p>Because a <strong>view is not a table and doesn’t store any data</strong>, there is <strong>nothing to index</strong>. It’s just a stored SQL query that gets run each time you use it.</p>
<blockquote>
<p>Indexing only works on actual <strong>stored</strong> data (like tables and materialized views), not <strong>virtual</strong> data (like views).</p></blockquote>
<h4 id="but-materialized-views-can-be-indexed">But Materialized Views <em>Can</em> Be Indexed<a hidden class="anchor" aria-hidden="true" href="#but-materialized-views-can-be-indexed">#</a></h4>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-postgresql" data-lang="postgresql"><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">MATERIALIZED</span> <span style="color:#66d9ef">VIEW</span> top_customers <span style="color:#66d9ef">AS</span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">SELECT</span> customer_id, SUM(total) <span style="color:#66d9ef">AS</span> total_spent
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">FROM</span> orders
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">GROUP</span> <span style="color:#66d9ef">BY</span> customer_id;
</span></span><span style="display:flex;"><span>
</span></span><span style="display:flex;"><span><span style="color:#66d9ef">CREATE</span> <span style="color:#66d9ef">INDEX</span> idx_total_spent <span style="color:#66d9ef">ON</span> top_customers(total_spent);
</span></span></code></pre></div><p>Since materialized views store actual rows, indexes help you query them faster—just like a regular table.</p>
<hr>
<h2 id="summary-table">Summary Table<a hidden class="anchor" aria-hidden="true" href="#summary-table">#</a></h2>
<h2 id="hahahugoshortcode17s0hbhb"><div class="custom-table-wrapper">
    <table>
      <table>
  <thead>
      <tr>
          <th>Feature</th>
          <th>View</th>
          <th>Materialized View</th>
          <th>Table</th>
      </tr>
  </thead>
  <tbody>
      <tr>
          <td>Stored Physically</td>
          <td>X</td>
          <td>O</td>
          <td>O</td>
      </tr>
      <tr>
          <td>Reflects Source Changes</td>
          <td>O</td>
          <td>O (but needs <code>REFRESH</code>)</td>
          <td>X</td>
      </tr>
      <tr>
          <td>Query Performance</td>
          <td>Moderate</td>
          <td>Fast (after refresh)</td>
          <td>Fast</td>
      </tr>
      <tr>
          <td>Can Be Indexed</td>
          <td>X</td>
          <td>O</td>
          <td>O</td>
      </tr>
      <tr>
          <td>Automatically Updated</td>
          <td>O</td>
          <td>X</td>
          <td>X</td>
      </tr>
      <tr>
          <td>Supports Insert/Update</td>
          <td>Sometimes</td>
          <td>No</td>
          <td>Yes</td>
      </tr>
  </tbody>
</table>

    </table>
</div></h2>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.minjunjeon.com/tags/sql/">Sql</a></li>
      <li><a href="https://www.minjunjeon.com/tags/data-manipulation/">Data Manipulation</a></li>
      <li><a href="https://www.minjunjeon.com/tags/update/">Update</a></li>
      <li><a href="https://www.minjunjeon.com/tags/delete/">Delete</a></li>
      <li><a href="https://www.minjunjeon.com/tags/views/">Views</a></li>
      <li><a href="https://www.minjunjeon.com/tags/materialized-views/">Materialized Views</a></li>
      <li><a href="https://www.minjunjeon.com/tags/interview-prep/">Interview Prep</a></li>
    </ul>
  </footer>
</article>
    </main>
    
<footer class="footer">
        <span>&copy; 2025 <a href="https://www.minjunjeon.com/">Minjun Jeon</a></span> · 

    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://github.com/adityatelange/hugo-PaperMod/" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });

</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.getElementById("theme-toggle").addEventListener("click", () => {
        if (document.body.className.includes("dark")) {
            document.body.classList.remove('dark');
            localStorage.setItem("pref-theme", 'light');
        } else {
            document.body.classList.add('dark');
            localStorage.setItem("pref-theme", 'dark');
        }
    })

</script>
</body>

</html>
